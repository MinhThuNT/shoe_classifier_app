<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Shoe Classification & Chatbot</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
  <script src="{{ url_for('static', filename='scripts.js') }}"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>
  <main class="container">
    <!-- Phần Upload ảnh và Phân loại, Grad-CAM -->
    <section class="panel classification-panel">
      <header>
        <h3>Upload Image for Classification</h3>
      </header>
      <form id="uploadForm" enctype="multipart/form-data">
          <input type="file" id="fileInput" name="file" accept="image/*" class="text-input" />
        <!-- Nhóm khung text input & Button của text input theo hàng ngang -->
          <div class="text-upload-group">
            <input type="text" id="textInput" name="description" placeholder="Enter a brief description (optional)..." class="text-input"/>
            <button type="button" id="sendDescBtn" class="btn btn-primary">💬 Send</button>
          </div>

        <!-- Xem trước ảnh -->
        <p class="image-label">User Image</p>
        <div class="shoe-box">
          <img id="preview" src="" alt="Image Preview" class="preview-img hidden" />
        </div>

        <!-- Mô tả người dùng -->
        <p class="user-description-label">User Description</p>
        <div class="shoe-box">
          <p id="descriptionDisplay" class="result-text hidden"></p>
        </div>

        <!-- Các nút chức năng -->
        <div class="button-group">
          <button type="button" id="classifyBtn" class="btn">🔍 Classify</button>
          <button type="button" id="gradCamBtn" class="btn">🔥 Grad-CAM</button>
          <button type="button" id="resetBtn" class="btn btn-reset">🔄 Reset</button>
        </div>
      </form>

      <!-- Kết quả phân loại -->
      <h4 class="classification-result">Classification Result</h4>
      <div class="shoe-box">
        <p id="classificationResult" class="result-text"></p>
      </div>

      <!-- Loading Indicator -->
      <div id="loadingIndicator" class="loading hidden">⏳ Processing...</div>

      <!-- Grad-CAM Result -->
      <h4 class="gradcam-result">Grad-CAM Result</h4>
      <div class="shoe-box">
        <img id="gradcamResult" src="" alt="Grad-CAM result" class="gradcam-img hidden" />
      </div>
    </section>

    <!-- Phần Chatbot -->
    <aside class="panel chatbot-panel">
      <header>
        <h3>Shoe Chatbot</h3>
      </header>
      <div id="chatbox" class="chatbox"></div>
      <div class="chat-input-group">
        <input type="text" id="chatInput" placeholder="Ask about shoes..." autocomplete="off"/>
        <button id="sendBtn" class="btn">💬 Send</button>
      </div>
      <button id="resetChat" class="btn btn-reset">🗑 Reset Chat</button>
    </aside>
  </main>
</body>
</html>
